<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ESA HST Archive (astroquery.esa.hubble) &#8212; astroquery v0.4.8.dev10183</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-astropy.css?v=9d21690f" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css?v=7f9a90b1" />
    
    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=d8f3c6fe"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script type="text/javascript" src="../../_static/sidebar.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <link rel="icon" href="../../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ESAHubbleClass" href="../../api/astroquery.esa.hubble.ESAHubbleClass.html" />
    <link rel="prev" title="Conf" href="../../api/astroquery.esa.hsa.Conf.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../../index.html"><span id="logotext1">astro</span><span id="logotext2">query</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../../api/astroquery.esa.hubble.ESAHubbleClass.html" title="ESAHubbleClass">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../../api/astroquery.esa.hsa.Conf.html" title="Conf">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../../index.html">astroquery v0.4.8.dev10183</a>
	 &#187;
      </li>
      
      <li>ESA HST Archive (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.esa.hubble</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="esa-hst-archive-astroquery-esa-hubble">
<span id="astroquery-esa-hubble"></span><h1>ESA HST Archive (<a class="reference internal" href="#module-astroquery.esa.hubble" title="astroquery.esa.hubble"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.esa.hubble</span></code></a>)<a class="headerlink" href="#esa-hst-archive-astroquery-esa-hubble" title="Link to this heading">¶</a></h1>
<p>The Hubble Space Telescope (HST) is a joint ESA/NASA orbiting astronomical
observatory operating from the near-infrared into the ultraviolet.  Launched
in 1990 and scheduled to operate at least through 2020, HST carries and has
carried a wide variety of instruments producing imaging, spectrographic,
astrometric, and photometric data through both pointed and parallel
observing programs. During its lifetime HST has become one of the most
important science projects ever, with over 500 000 observations of more than
30000 targets available for retrieval from the Archive.</p>
<p>This package allows the access to the <a class="reference external" href="https://hst.esac.esa.int/ehst/">European Space Agency Hubble Archive</a>. All the HST observations available
in the EHST are synchronised with the MAST services for HST reprocessed
public data and corresponding metadata.  Therefore, excluding proprietary
data, all HST data in the EHST are identical to those in MAST.</p>
<p>It is highly recommended checking the status of eHST TAP before executing this module. To do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">get_status_messages</span><span class="p">()</span>
</pre></div>
</div>
<p>This method will retrieve the same warning messages shown in eHST Science Archive with information about
service degradation.</p>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>The recommended steps to work with eHST Astroquery module are described below:</dt><dd><ol class="arabic simple">
<li><p>Retrieve the desired observations, fulfilling the user requirements, using one of the following methods: <code class="docutils literal notranslate"><span class="pre">query_target</span></code>, <code class="docutils literal notranslate"><span class="pre">query_criteria</span></code>, <code class="docutils literal notranslate"><span class="pre">cone_search</span></code> or <code class="docutils literal notranslate"><span class="pre">cone_search_criteria</span></code>. In the results, the user will allways find a column named ‘observation_id’ that will be used as a reference.</p></li>
<li><p>If all the products associated to an observation are required, then use <code class="docutils literal notranslate"><span class="pre">download_product</span></code>.</p></li>
<li><p>If only FITS files associated to an observation are required, then use <code class="docutils literal notranslate"><span class="pre">download_fits_files</span></code>.</p></li>
<li><p>It is possible to retrieve the name of the files associated to an observation using <code class="docutils literal notranslate"><span class="pre">get_associated_files</span></code>, together with their calibration level, size and type.</p></li>
<li><p>Users can filter the previous list to get the specific files to download and use them in <code class="docutils literal notranslate"><span class="pre">download_file</span></code> function.</p></li>
<li><p>Use your algorithms and code to process the data.</p></li>
</ol>
</dd>
</dl>
</div>
<section id="querying-target-names-in-the-hubble-archive">
<h3>1. Querying target names in the Hubble archive<a class="headerlink" href="#querying-target-names-in-the-hubble-archive" title="Link to this heading">¶</a></h3>
<p>The query_target function queries the name of the target as given by the proposer of the observations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_target</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;m31&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;m31_query.xml.gz&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>This will retrieve a table with the output of the query.
It will also download a file storing all metadata for all observations
associated with target name ‘m31’. The result of the query will be stored in
file ‘m31_query.xml.gz’.</p>
</section>
<section id="retrieving-observations-by-search-criteria-in-the-hubble-archive">
<h3>2. Retrieving observations by search criteria in the Hubble archive<a class="headerlink" href="#retrieving-observations-by-search-criteria-in-the-hubble-archive" title="Link to this heading">¶</a></h3>
<p>The query_criteria function uses a set of established parameters to create
and execute an ADQL query, accessing the HST archive database usgin the Table
Access Protocol (TAP).</p>
<ul class="simple">
<li><p><strong>calibration_level</strong> (<em>str or int, optional</em>): The identifier of the data reduction/processing applied to the data.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>RAW (1)</p></li>
<li><p>CALIBRATED (2)</p></li>
<li><p>PRODUCT (3)</p></li>
<li><p>AUXILIARY (0)</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><strong>data_product_type</strong> (<em>str, optional</em>): High level description of the product.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>image</p></li>
<li><p>spectrum</p></li>
<li><p>timeseries</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><strong>intent</strong> (<em>str, optional</em>): The intent of the original obsever in acquiring this observation.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>SCIENCE</p></li>
<li><p>CALIBRATION</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><strong>collection</strong> (<em>list of strings, optional</em>): List of collections that are available in eHST catalogue.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>HLA</p></li>
<li><p>HST</p></li>
<li><p>HAP</p></li>
</ul>
<p>Do not forget that this is a list of elements, so it must be defined as [‘HST’], [‘HST’, ‘HLA’]…</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>instrument_name</strong> (<em>list of strings, optional</em>): Name(s) of the instrument(s) used to generate the dataset. This is also a list of elements.</p></li>
<li><p><strong>filters</strong> (<em>list of strings, optional</em>): Name(s) of the filter(s) used to generate the dataset. This is also a list of elements.</p></li>
<li><p><strong>proposal</strong> (<em>int, optional</em>): Proposal or Program ID to be searched.</p></li>
<li><p><strong>async_job</strong> (<em>bool, optional, default ‘True’</em>): executes the query (job) in asynchronous/synchronous mode (default synchronous)</p></li>
<li><p><strong>output_file</strong> (<em>str, optional, default None</em>) file name where the results are saved if dumpToFile is True. If this parameter is not provided, the jobid is used instead</p></li>
<li><p><strong>output_format</strong> (<em>str, optional, default ‘votable’</em>) results format</p></li>
<li><p><strong>verbose</strong> (<em>bool, optional, default ‘False’</em>): flag to display information about the process</p></li>
<li><p><strong>get_query</strong> (<em>bool, optional, default ‘False’</em>): flag to return the query associated to the criteria as the result of this function.</p></li>
</ul>
<p>This is an example of a query with all the parameters and the verbose flag activated, so the query is shown as a log message.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">calibration_level</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;SCIENCE&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">obs_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HLA&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">instrument_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;WFC3&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F555W&#39;</span><span class="p">,</span> <span class="s1">&#39;F606W&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">async_job</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;output1.vot.gz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;votable&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">get_query</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>    
<span class="go">INFO: select o.*, p.calibration_level, p.data_product_type, pos.ra, pos.dec from ehst.observation AS o JOIN ehst.plane as p on o.observation_uuid=p.observation_uuid JOIN ehst.position as pos on p.plane_id = pos.plane_id where(p.calibration_level LIKE &#39;%PRODUCT%&#39; AND p.data_product_type LIKE &#39;%image%&#39; AND o.intent LIKE &#39;%SCIENCE%&#39; AND (o.collection LIKE &#39;%HLA%&#39;) AND (o.instrument_name LIKE &#39;%WFC3%&#39;) AND (o.filter LIKE &#39;%F555W%&#39; OR o.filter LIKE &#39;%F606W%&#39;)) [astroquery.esa.hubble.core]</span>
<span class="go">Launched query: &#39;select  TOP 2000 o.*, p.calibration_level, p.data_product_type, pos.ra, pos.dec from ehst.observation AS o JOIN ehst.plane as p on o.observation_uuid=p.observation_uuid JOIN ehst.position as pos on p.plane_id = pos.plane_id where(p.calibration_level LIKE &#39;%PRODUCT%&#39; AND p.data_product_type LIKE &#39;%image%&#39; AND o.intent LIKE &#39;%SCIENCE%&#39; AND (o.collection LIKE &#39;%HLA%&#39;) AND (o.instrument_name LIKE &#39;%WFC3%&#39;) AND (o.filter LIKE &#39;%F555W%&#39; OR o.filter LIKE &#39;%F606W%&#39;))&#39;</span>
<span class="go">------&gt;http</span>
<span class="go">host = hst.esac.esa.int:80</span>
<span class="go">context = /tap-server/tap//sync</span>
<span class="go">Content-type = application/x-www-form-urlencoded</span>
<span class="go">200 200</span>
<span class="go">[(&#39;Date&#39;, &#39;Mon, 25 Jul 2022 15:46:58 GMT&#39;), (&#39;Server&#39;, &#39;Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips PHP/5.4.16 mod_jk/1.2.48&#39;), (&#39;Cache-Control&#39;, &#39;no-cache, no-store, max-age=0, must-revalidate&#39;), (&#39;Pragma&#39;, &#39;no-cache&#39;), (&#39;Expires&#39;, &#39;0&#39;), (&#39;X-XSS-Protection&#39;, &#39;1; mode=block&#39;), (&#39;X-Frame-Options&#39;, &#39;SAMEORIGIN&#39;), (&#39;X-Content-Type-Options&#39;, &#39;nosniff&#39;), (&#39;Content-Encoding&#39;, &#39;gzip&#39;), (&#39;Content-Disposition&#39;, &#39;attachment;filename=&quot;1658764018965O-result.vot&quot;&#39;), (&#39;Content-Type&#39;, &#39;application/x-votable+xml&#39;), (&#39;Set-Cookie&#39;, &#39;JSESSIONID=B3AD5976E059A042D39AAA35C9C814FC; Path=/; HttpOnly&#39;), (&#39;Connection&#39;, &#39;close&#39;), (&#39;Transfer-Encoding&#39;, &#39;chunked&#39;)]</span>
<span class="go">Retrieving sync. results...</span>
<span class="go">Saving results to: output1.vot.gz</span>
<span class="go">Query finished.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>    
<span class="go"> algorithm_name  collection ...         ra                 dec</span>
<span class="go">     object        object   ...      float64             float64</span>
<span class="go">---------------- ---------- ... ------------------ -------------------</span>
<span class="go">HLA ASSOCIATIONS        HLA ... 196.03170537675234 -49.368511417967795</span>
<span class="go">        exposure        HLA ... 196.03171011284857  -49.36851677699096</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  259.2792176982667  43.133150839338235</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  68.97704902707727 -12.677248264318337</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  68.97704902707727 -12.677248264318337</span>
<span class="go">        exposure        HLA ...  68.97705442773626 -12.677252912230811</span>
<span class="go">             ...        ... ...                ...                 ...</span>
<span class="go">HLA ASSOCIATIONS        HLA ... 210.80500687669544  54.278497365211976</span>
<span class="go">        exposure        HLA ...  152.7572845488674   -4.80118571219738</span>
<span class="go">        exposure        HLA ...  152.7572845488674   -4.80118571219738</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  152.7572806802392  -4.801183163442886</span>
<span class="go">        exposure        HLA ...  152.7572845488674   -4.80118571219738</span>
<span class="go">HLA ASSOCIATIONS        HLA ... 202.44374997285675 -23.750512499483055</span>
<span class="go">        exposure        HLA ... 202.44375533561396 -23.750513053780008</span>
<span class="go">HLA ASSOCIATIONS        HLA ... 202.44374997285675 -23.750512499483055</span>
<span class="go">        exposure        HLA ... 202.44375533561396 -23.750513053780008</span>
<span class="go">        exposure        HLA ...  152.8105559087745   -4.65644496753373</span>
<span class="go">        exposure        HLA ...  152.8105559087745   -4.65644496753373</span>
<span class="go">Length = 2000 rows</span>
</pre></div>
</div>
<p>This will make a synchronous search, limited to 2000 results to find the observations that match these specific
requirements. It will also download a votable file called <strong>output.vot.gz</strong> containing the result of the
query.</p>
<p>The following example uses the string definition of the calibration level (‘PRODUCT’) and executes an asynchronous job to get all the results that match the criteria.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">calibration_level</span> <span class="o">=</span> <span class="s1">&#39;PRODUCT&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;SCIENCE&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">obs_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HLA&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">instrument_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;WFC3&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F555W&#39;</span><span class="p">,</span> <span class="s1">&#39;F606W&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">async_job</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;output2.vot.gz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;votable&quot;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">verbose</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">get_query</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>  
<span class="go"> algorithm_name  collection ...         ra                 dec</span>
<span class="go">---------------- ---------- ... ------------------ -------------------</span>
<span class="go">HLA ASSOCIATIONS        HLA ... 196.03170537675234 -49.368511417967795</span>
<span class="go">        exposure        HLA ... 196.03171011284857  -49.36851677699096</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">        exposure        HLA ...  259.2792180139594   43.13314581814599</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  259.2792176982667  43.133150839338235</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  68.97704902707727 -12.677248264318337</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  68.97704902707727 -12.677248264318337</span>
<span class="go">        exposure        HLA ...  68.97705442773626 -12.677252912230811</span>
<span class="go">        exposure        HLA ...  68.97705442773626 -12.677252912230811</span>
<span class="go">             ...        ... ...                ...                 ...</span>
<span class="go">        exposure        HLA ...  345.6583071276117   56.72394842149916</span>
<span class="go">        exposure        HLA ... 345.65831033427037  56.723950318257195</span>
<span class="go">        exposure        HLA ...    345.65826624404   56.72397181023684</span>
<span class="go">        exposure        HLA ...  345.6582969971932   56.72398324705819</span>
<span class="go">        exposure        HLA ... 345.65825980977695   56.72394255099519</span>
<span class="go">        exposure        HLA ...  345.6582694604474    56.7239515193261</span>
<span class="go">        exposure        HLA ...  345.6582302371085   56.72396314167643</span>
<span class="go">        exposure        HLA ... 345.65834620470923   56.72399729379321</span>
<span class="go">HLA ASSOCIATIONS        HLA ...  345.6583089525364  56.723967490767976</span>
<span class="go">        exposure        HLA ... 295.67142911697397  -10.32552919162329</span>
<span class="go">        exposure        HLA ... 140.37867144039893   45.11729184881005</span>
<span class="go">Length = 12965 rows</span>
</pre></div>
</div>
<p>As has been mentioned, these parameters are optional and it is not necessary to define all of them to execute this function, as the search will be adapted to the ones that are available.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result1</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">calibration_level</span> <span class="o">=</span> <span class="s1">&#39;PRODUCT&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">async_job</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;output3.vot.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result2</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;SCIENCE&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">async_job</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;output4.vot.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result3</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;timeseries&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">async_job</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">output_file</span> <span class="o">=</span> <span class="s1">&#39;output5.vot.gz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If no criteria are specified to limit the selection, this function will retrieve all the observations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">async_job</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>    
<span class="go">INFO: select o.*, p.calibration_level, p.data_product_type, pos.ra, pos.dec from ehst.observation AS o JOIN ehst.plane as p on o.observation_uuid=p.observation_uuid JOIN ehst.position as pos on p.plane_id = pos.plane_id [astroquery.esa.hubble.core]</span>
<span class="go">Launched query: &#39;select  TOP 2000 o.*, p.calibration_level, p.data_product_type, pos.ra, pos.dec from ehst.observation AS o JOIN ehst.plane as p on o.observation_uuid=p.observation_uuid JOIN ehst.position as pos on p.plane_id = pos.plane_id&#39;</span>
<span class="go">------&gt;http</span>
<span class="go">host = hst.esac.esa.int:80</span>
<span class="go">context = /tap-server/tap//sync</span>
<span class="go">Content-type = application/x-www-form-urlencoded</span>
<span class="go">200 200</span>
<span class="go">[(&#39;Date&#39;, &#39;Mon, 25 Jul 2022 16:21:18 GMT&#39;), (&#39;Server&#39;, &#39;Apache/2.4.6 (Red Hat Enterprise Linux) OpenSSL/1.0.2k-fips PHP/5.4.16 mod_jk/1.2.48&#39;), (&#39;Cache-Control&#39;, &#39;no-cache, no-store, max-age=0, must-revalidate&#39;), (&#39;Pragma&#39;, &#39;no-cache&#39;), (&#39;Expires&#39;, &#39;0&#39;), (&#39;X-XSS-Protection&#39;, &#39;1; mode=block&#39;), (&#39;X-Frame-Options&#39;, &#39;SAMEORIGIN&#39;), (&#39;X-Content-Type-Options&#39;, &#39;nosniff&#39;), (&#39;Content-Encoding&#39;, &#39;gzip&#39;), (&#39;Content-Disposition&#39;, &#39;attachment;filename=&quot;1658766078997O-result.vot&quot;&#39;), (&#39;Content-Type&#39;, &#39;application/x-votable+xml&#39;), (&#39;Set-Cookie&#39;, &#39;JSESSIONID=7098EC515E7A2240E6F3129D23564139; Path=/; HttpOnly&#39;), (&#39;Connection&#39;, &#39;close&#39;), (&#39;Transfer-Encoding&#39;, &#39;chunked&#39;)]</span>
<span class="go">Retrieving sync. results...</span>
<span class="go">Query finished.</span>
</pre></div>
</div>
<p>This last example will provide the ADQL query based on the criteria defined by the user.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">calibration_level</span> <span class="o">=</span> <span class="s1">&#39;PRODUCT&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">intent</span><span class="o">=</span><span class="s1">&#39;SCIENCE&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">obs_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HLA&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">instrument_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;WFC3&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F555W&#39;</span><span class="p">,</span> <span class="s1">&#39;F606W&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                  <span class="n">get_query</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">select * from ehst.archive where(calibration_level=3 AND data_product_type LIKE &#39;%image%&#39; AND intent LIKE &#39;%science%&#39; AND (collection LIKE &#39;%HLA%&#39;) AND (instrument_name LIKE &#39;%WFC3%&#39;) AND (filter LIKE &#39;%F555W%&#39; OR filter LIKE &#39;%F606W%&#39;))</span>
</pre></div>
</div>
</section>
<section id="cone-searches-in-the-hubble-archive">
<h3>3. Cone searches in the Hubble archive<a class="headerlink" href="#cone-searches-in-the-hubble-archive" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">(</span><span class="s2">&quot;00h42m44.51s +41d16m08.45s&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;icrs&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">cone_search</span><span class="p">(</span><span class="n">coordinates</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;cone_search_m31_5.vot.gz&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will perform a cone search with radius 7 arcmins. The result of the
query will be returned and stored in the votable file
‘cone_search_m31_5.vot.gz’. If no filename is defined and the “save” tag is True,
the module will provide a default name. It is also possible to store only the results
in memory, without defining neither a filename nor the “save” tag.</p>
</section>
<section id="cone-searches-with-criteria-in-the-hubble-archive">
<h3>4. Cone searches with criteria in the Hubble archive<a class="headerlink" href="#cone-searches-with-criteria-in-the-hubble-archive" title="Link to this heading">¶</a></h3>
<p>It is also possible to perform a cone search defined by a target name or coordinates, a radius
and a set of criteria to filter the results.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">cone_search_criteria</span><span class="p">(</span><span class="n">target</span><span class="o">=</span> <span class="s1">&#39;m31&#39;</span><span class="p">,</span><span class="n">radius</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">obs_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HST&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">data_product_type</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">instrument_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ACS/WFC&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F435W&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">async_job</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;output1.vot.gz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;votable&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>    
<span class="go">algorithm_name collection            end_time           ...         ra                dec</span>
<span class="go">-------------- ---------- ----------------------------- ... ------------------ ------------------</span>
<span class="go">  multidrizzle        HST 2002-06-29 15:25:57.556128+00 ... 10.773035733571806  41.28459914735614</span>
<span class="go">       drizzle        HST    2002-06-29 12:15:20.787+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">       drizzle        HST    2002-06-29 12:15:20.787+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">       drizzle        HST    2002-06-29 12:15:20.787+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">       drizzle        HST    2002-06-29 15:25:57.557+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">       drizzle        HST    2002-06-29 15:25:57.557+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">       drizzle        HST    2002-06-29 15:25:57.557+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">      exposure        HST    2002-06-29 10:40:25.757+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">      exposure        HST    2002-06-29 10:40:25.757+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">      exposure        HST    2002-06-29 10:49:21.757+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">      exposure        HST    2002-06-29 10:49:21.757+00 ... 10.809522856742248  41.29351658280752</span>
<span class="go">           ...        ...                           ... ...                ...                ...</span>
<span class="go">      exposure        HST     2013-06-19 01:44:51.32+00 ... 10.766005545644669 41.309233725982274</span>
<span class="go">       drizzle        HST      2014-06-26 02:01:04.4+00 ...  10.56783424321201  41.26161655867049</span>
<span class="go">       drizzle        HST      2014-06-26 02:01:04.4+00 ...  10.56783424321201  41.26161655867049</span>
<span class="go">      exposure        HST    2014-06-26 00:04:17.347+00 ...  10.56783424321201  41.26161655867049</span>
<span class="go">      exposure        HST    2014-06-26 00:04:17.347+00 ...  10.56783424321201  41.26161655867049</span>
<span class="go">      exposure        HST 2014-06-26 00:26:04.320001+00 ...  10.56784158160213  41.26168995624255</span>
<span class="go">      exposure        HST 2014-06-26 00:26:04.320001+00 ...  10.56784158160213  41.26168995624255</span>
<span class="go">      exposure        HST    2014-06-26 01:37:39.337+00 ... 10.567904084182938  41.26166780758625</span>
<span class="go">      exposure        HST    2014-06-26 01:37:39.337+00 ... 10.567904084182938  41.26166780758625</span>
<span class="go">      exposure        HST    2014-06-26 02:01:03.337+00 ... 10.567896755477244  41.26159439998882</span>
<span class="go">      exposure        HST    2014-06-26 02:01:03.337+00 ... 10.567896755477244  41.26159439998882</span>
<span class="go">Length = 323 rows</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coords</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">(</span><span class="s2">&quot;00h42m44.51s +41d16m08.45s&quot;</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;icrs&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">cone_search_criteria</span><span class="p">(</span><span class="n">coordinates</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">radius</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">arcmin</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">obs_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;HST&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">instrument_name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;WFPC2&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;F606W&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                        <span class="n">async_job</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;output1.vot.gz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">output_format</span><span class="o">=</span><span class="s2">&quot;votable&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>   
<span class="go">algorithm_name collection          end_time          ...         ra                dec</span>
<span class="go">-------------- ---------- -------------------------- ... ------------------ ------------------</span>
<span class="go">      exposure        HST 1996-07-11 19:57:16.567+00 ... 10.707934959432448  41.29717554921647</span>
<span class="go">      exposure        HST 1996-07-11 19:57:16.567+00 ... 10.707934959432448  41.29717554921647</span>
<span class="go">      exposure        HST 1996-07-11 23:10:56.567+00 ... 10.707934959432448  41.29717554921647</span>
<span class="go">      exposure        HST 1996-07-11 23:10:56.567+00 ... 10.707934959432448  41.29717554921647</span>
<span class="go">      exposure        HST 1995-08-07 17:18:17.427+00 ... 10.667025486961762  41.27549451122148</span>
<span class="go">      exposure        HST 1995-08-07 17:18:17.427+00 ... 10.667025486961762  41.27549451122148</span>
<span class="go">      exposure        HST  1998-08-13 15:41:53.99+00 ...  10.62792588770676  41.16842053688991</span>
<span class="go">      exposure        HST  1998-08-13 15:41:53.99+00 ...  10.62792588770676  41.16842053688991</span>
<span class="go">      exposure        HST  1998-08-13 15:53:53.99+00 ... 10.627778569005512 41.168427385527195</span>
<span class="go">      exposure        HST  1998-08-13 15:53:53.99+00 ... 10.627778569005512 41.168427385527195</span>
<span class="go">      exposure        HST 1999-06-06 17:52:53.323+00 ... 10.726290793310492  41.17571391732456</span>
<span class="go">      exposure        HST 1999-06-06 17:52:53.323+00 ... 10.726290793310492  41.17571391732456</span>
<span class="go">      exposure        HST  1999-06-06 19:19:33.45+00 ... 10.726290793310492  41.17571391732456</span>
<span class="go">      exposure        HST  1999-06-06 19:19:33.45+00 ... 10.726290793310492  41.17571391732456</span>
<span class="go">      exposure        HST  1998-08-13 17:18:53.99+00 ... 10.627778569005512 41.168427385527195</span>
<span class="go">      exposure        HST  1998-08-13 17:18:53.99+00 ... 10.627778569005512 41.168427385527195</span>
<span class="go">      exposure        HST  2002-06-29 10:28:56.79+00 ... 10.673753121140141  41.33685901875662</span>
<span class="go">      exposure        HST  2002-06-29 10:28:56.79+00 ... 10.673753121140141  41.33685901875662</span>
<span class="go">      exposure        HST  2002-06-29 10:35:56.79+00 ... 10.673753121140141  41.33685901875662</span>
<span class="go">      exposure        HST  2002-06-29 10:35:56.79+00 ... 10.673753121140141  41.33685901875662</span>
</pre></div>
</div>
<p>This will perform a cone search with radius 7 arcmins around the target (defined by
its coordinates or its name) using the filters defined when executing the function.</p>
<p>This function allows the same parameters than the search criteria (see Section 2).</p>
</section>
<section id="getting-hubble-products">
<h3>5. Getting Hubble products<a class="headerlink" href="#getting-hubble-products" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please bear in mind that the default format to download
sets of files has been modified from TAR to ZIP.</p>
</div>
<p>After retrieving the metadata, the user can filter the result table and get the rows of interest.
The most important column is ‘observation_id’ and it is possible to use it to retrieve all the
associated files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In eHST is it possible to download products based on their observation ID (mandatory) and
a required calibration_level (RAW, CALIBRATED, PRODUCT or AUXILIARY) and/or product type (SCIENCE, PREVIEW, THUMBNAIL or AUXILIARY).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deprecation Warning: product types PRODUCT, SCIENCE_PRODUCT or POSTCARD are no longer supported. Please modify your scripts accordingly.</p>
</div>
<p>For instance, next commands will download all files for the raw calibration level
of the observation ‘j6fl25s4q’ and it will store them in a file called
‘raw_data_for_j6fl25s4q.zip’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_product</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;j6fl25s4q&quot;</span><span class="p">,</span> <span class="n">calibration_level</span><span class="o">=</span><span class="s2">&quot;RAW&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;raw_data_for_j6fl25s4q&quot;</span><span class="p">)</span>
<span class="go">&#39;raw_data_for_j6fl25s4q.zip&#39;</span>
</pre></div>
</div>
<p>This second example will download the science files associated to the observation ‘j6fl25s4q’ and it will store them in a file called
‘science_data_for_j6fl25s4q.zip’, modifying the filename provided to ensure that the extension of the file is correct.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_product</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;j6fl25s4q&quot;</span><span class="p">,</span> <span class="n">product_type</span><span class="o">=</span><span class="s2">&quot;SCIENCE&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;science_data_for_j6fl25s4q&quot;</span><span class="p">)</span>
<span class="go">&#39;science_data_for_j6fl25s4q.zip&#39;</span>
</pre></div>
</div>
<p>This third case will download the science files associated to the observation ‘j6fl25s4q’ in raw calibration level and it will store them in a file called
‘science_raw_data_for_j6fl25s4q.fits.gz’, modifying the filename provided to ensure that the extension of the file is correct. There is only
one file fulfilling these conditions and it is a FITS file, so the extension is adapted to the contents of the request.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_product</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;j6fl25s4q&quot;</span><span class="p">,</span> <span class="n">calibration_level</span><span class="o">=</span><span class="s2">&quot;RAW&quot;</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;science_raw_data_for_j6fl25s4q&quot;</span><span class="p">,</span> <span class="n">product_type</span><span class="o">=</span><span class="s2">&quot;SCIENCE&quot;</span><span class="p">)</span>
<span class="go">&#39;science_raw_data_for_j6fl25s4q.fits.gz&#39;</span>
</pre></div>
</div>
<p>If the user wants to filter the files to be downloaded, this module provides additional mechanisms.</p>
<p>The first step is to query eHST Server to retrieve them. For instance, for observation w0ji0v01t:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">get_associated_files</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s1">&#39;w0ji0v01t&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>    
<span class="go">       filename      calibration_level    type   size_uncompressed</span>
<span class="go">        object             object        object        object</span>
<span class="go">  ------------------ ----------------- --------- -----------------</span>
<span class="go">  w0ji0v01t_c0f.fits        CALIBRATED   science          10035 kB</span>
<span class="go">   w0ji0v01t_c0f.jpg        CALIBRATED   preview             15 kB</span>
<span class="go">                 ...               ...       ...               ...</span>
<span class="go">  w0ji0v01t_shf.fits               RAW auxiliary             31 kB</span>
<span class="go">  w0ji0v01t_trl.fits               RAW auxiliary             23 kB</span>
<span class="go">  w0ji0v01t_x0f.fits               RAW auxiliary            101 kB</span>
</pre></div>
</div>
<p>Now it is possible to download a specific file using the filename column.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">&quot;w0ji0v01t_x0f.fits&quot;</span><span class="p">)</span>
<span class="go">&#39;w0ji0v01t_x0f.fits.gz&#39;</span>
</pre></div>
</div>
<p>This will download the compressed file ‘w0ji0v01t_x0f.fits.gz’. This table can be iterated to download all the files.</p>
<p>In case the user is only interested in FITS files, this module contains a specific function to execute this request.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_fits_files</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s1">&#39;w0ji0v01t&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</section>
<section id="getting-hubble-postcards">
<h3>6. Getting Hubble postcards<a class="headerlink" href="#getting-hubble-postcards" title="Link to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">get_postcard</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;j6fl25s4q&quot;</span><span class="p">,</span> <span class="n">calibration_level</span><span class="o">=</span><span class="s2">&quot;RAW&quot;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;raw_postcard_for_j6fl25s4q.jpg&quot;</span><span class="p">)</span>
<span class="go">&#39;raw_postcard_for_j6fl25s4q.jpg&#39;</span>
</pre></div>
</div>
<p>This will download the postcard for the observation ‘J8VP03010’ with low
resolution (256) and it will stored in a jpg called
‘raw_postcard_for_j6fl25s4q.jpg’. Resolution of 1024 is also available.</p>
<p>Calibration levels can be RAW, CALIBRATED, PRODUCT or AUXILIARY.</p>
</section>
<section id="getting-access-to-catalogues">
<h3>7. Getting access to catalogues<a class="headerlink" href="#getting-access-to-catalogues" title="Link to this heading">¶</a></h3>
<p>This function provides access to the HST archive database using the Table
Access Protocol (TAP) and via the Astronomical Data Query Language (ADQL).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">&quot;select top 10 * from hsc.hubble_sc&quot;</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;test.vot.gz&quot;</span><span class="p">)</span> 
</pre></div>
</div>
<p>This will execute an ADQL query to download the first 10 sources in the
Hubble Source Catalog (HSC) (format default: compressed
votable). The result of the query will be stored in the file
‘test.vot.gz’. The result of this query can be viewed by doing
result.get_results() or printing it by doing print(result).</p>
<p>To access the same information shown in eHST Science Archive:
.. doctest-remote-data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">&quot;select top 10 * from ehst.archive&quot;</span><span class="p">,</span> <span class="n">output_file</span><span class="o">=</span><span class="s2">&quot;archive.vot.gz&quot;</span><span class="p">)</span> 
</pre></div>
</div>
<p>Deprecation Warning: this method was previously named as query_hst_tap. Please modify your scripts accordingly.</p>
</section>
<section id="getting-related-members-of-hap-and-hst-observations">
<h3>8. Getting related members of HAP and HST observations<a class="headerlink" href="#getting-related-members-of-hap-and-hst-observations" title="Link to this heading">¶</a></h3>
<p>This function takes in an observation id of a Composite or Simple observation.
If the observation is Simple the method returns the Composite observation that
is built on this simple observation. If the observation is Composite then the
method returns the simple observations that make it up.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">get_member_observations</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;jdrz0c010&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">[&#39;jdrz0cjxq&#39;, &#39;jdrz0cjyq&#39;]</span>
</pre></div>
</div>
</section>
<section id="getting-link-between-simple-hap-and-hst-observations">
<h3>9. Getting link between Simple HAP and HST observations<a class="headerlink" href="#getting-link-between-simple-hap-and-hst-observations" title="Link to this heading">¶</a></h3>
<p>This function takes in an observation id of a Simple HAP or HST observation and
returns the corresponding HAP or HST observation</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">get_hap_hst_link</span><span class="p">(</span><span class="n">observation_id</span><span class="o">=</span><span class="s2">&quot;hst_16316_71_acs_sbc_f150lp_jec071i9&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">[&#39;jec071i9q&#39;]</span>
</pre></div>
</div>
</section>
<section id="retrieve-metadata-and-data-from-a-program-proposal-id">
<h3>10. Retrieve metadata and data from a program / proposal ID<a class="headerlink" href="#retrieve-metadata-and-data-from-a-program-proposal-id" title="Link to this heading">¶</a></h3>
<p>It is possible to retrieve all the observations associated to a specific program ID using the following method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">esahubble</span><span class="o">.</span><span class="n">get_observations_from_program</span><span class="p">(</span><span class="n">program</span><span class="o">=</span><span class="mi">5773</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the different functions described in Section 5, it is possible to get the list of files, filter and download them.
Another alternative is using ‘download_files_from_program’. By specifying a program ID, users can define other
filters (in a similar way to query_criteria) and download only FITS or all the files associated.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.esa.hubble</span> <span class="kn">import</span> <span class="n">ESAHubble</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span> <span class="o">=</span> <span class="n">ESAHubble</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">esahubble</span><span class="o">.</span><span class="n">download_files_from_program</span><span class="p">(</span><span class="n">program</span><span class="o">=</span><span class="mi">5410</span><span class="p">,</span><span class="n">instrument_name</span><span class="o">=</span><span class="s1">&#39;WFPC2&#39;</span><span class="p">,</span><span class="n">obs_collection</span><span class="o">=</span><span class="s1">&#39;HLA&#39;</span><span class="p">,</span><span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;F814W/F450W&#39;</span><span class="p">],</span> <span class="n">only_fits</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<section id="reference-api">
<h4>Reference/API<a class="headerlink" href="#reference-api" title="Link to this heading">¶</a></h4>
<section id="module-astroquery.esa.hubble">
<span id="astroquery-esa-hubble-package"></span><h5>astroquery.esa.hubble Package<a class="headerlink" href="#module-astroquery.esa.hubble" title="Link to this heading">¶</a></h5>
<p>European Space Astronomy Centre (ESAC)
European Space Agency (ESA)</p>
<section id="classes">
<h6>Classes<a class="headerlink" href="#classes" title="Link to this heading">¶</a></h6>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../../api/astroquery.esa.hubble.ESAHubbleClass.html#astroquery.esa.hubble.ESAHubbleClass" title="astroquery.esa.hubble.ESAHubbleClass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ESAHubbleClass</span></code></a>(*[, tap_handler, show_messages])</p></td>
<td><p>Class to init ESA Hubble Module and communicate with eHST TAP</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../../api/astroquery.esa.hubble.Conf.html#astroquery.esa.hubble.Conf" title="astroquery.esa.hubble.Conf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Conf</span></code></a>()</p></td>
<td><p>Configuration parameters for <a class="reference internal" href="#module-astroquery.esa.hubble" title="astroquery.esa.hubble"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.esa.hubble</span></code></a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">ESA HST Archive (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.esa.hubble</span></code>)</a><ul>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#querying-target-names-in-the-hubble-archive">1. Querying target names in the Hubble archive</a></li>
<li><a class="reference internal" href="#retrieving-observations-by-search-criteria-in-the-hubble-archive">2. Retrieving observations by search criteria in the Hubble archive</a></li>
<li><a class="reference internal" href="#cone-searches-in-the-hubble-archive">3. Cone searches in the Hubble archive</a></li>
<li><a class="reference internal" href="#cone-searches-with-criteria-in-the-hubble-archive">4. Cone searches with criteria in the Hubble archive</a></li>
<li><a class="reference internal" href="#getting-hubble-products">5. Getting Hubble products</a></li>
<li><a class="reference internal" href="#getting-hubble-postcards">6. Getting Hubble postcards</a></li>
<li><a class="reference internal" href="#getting-access-to-catalogues">7. Getting access to catalogues</a></li>
<li><a class="reference internal" href="#getting-related-members-of-hap-and-hst-observations">8. Getting related members of HAP and HST observations</a></li>
<li><a class="reference internal" href="#getting-link-between-simple-hap-and-hst-observations">9. Getting link between Simple HAP and HST observations</a></li>
<li><a class="reference internal" href="#retrieve-metadata-and-data-from-a-program-proposal-id">10. Retrieve metadata and data from a program / proposal ID</a><ul>
<li><a class="reference internal" href="#reference-api">Reference/API</a><ul>
<li><a class="reference internal" href="#module-astroquery.esa.hubble">astroquery.esa.hubble Package</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../../_sources/esa/hubble/hubble.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2025, The Astroquery Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.4.7. &nbsp;
    Last built 07 Apr 2025. <br/>
  </p>
</footer>
  </body>
</html>