<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ALMA Queries (astroquery.alma) &#8212; astroquery v0.4.8.dev10179</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-astropy.css?v=9d21690f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css?v=7f9a90b1" />
    
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=1d6242bd"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="icon" href="../_static/astropy_logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="get_enhanced_table" href="../api/astroquery.alma.get_enhanced_table.html" />
    <link rel="prev" title="Default Configuration" href="../configuration.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">query</span><span id="logotext3">:docs</span></a>
  <ul>
    
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="../api/astroquery.alma.get_enhanced_table.html" title="get_enhanced_table">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="../configuration.html" title="Default Configuration">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">astroquery v0.4.8.dev10179</a>
	 &#187;
      </li>
      
      <li>ALMA Queries (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.alma</span></code>)</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="alma-queries-astroquery-alma">
<span id="astroquery-alma"></span><h1>ALMA Queries (<a class="reference internal" href="#module-astroquery.alma" title="astroquery.alma"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.alma</span></code></a>)<a class="headerlink" href="#alma-queries-astroquery-alma" title="Link to this heading">¶</a></h1>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#module-astroquery.alma" title="astroquery.alma"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.alma</span></code></a> provides the astroquery interface to the ALMA archive.  It
supports object and region based querying and data staging and retrieval.</p>
<p>You can get interactive help to find out what keywords to query for:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma</span> <span class="kn">import</span> <span class="n">Alma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">help</span><span class="p">()</span>  

<span class="go">Most common ALMA query keywords are listed below. These keywords are part of the ALMA ObsCore model, an IVOA standard for metadata representation (3rd column). They were also present in original ALMA Web form and, for backwards compatibility can be accessed with their old names (2nd column).</span>
<span class="go">More elaborate queries on the ObsCore model are possible with `query_sia` or `query_tap` methods</span>
<span class="go">  Description                       Original ALMA keyword               ObsCore keyword</span>
<span class="go">-------------------------------------------------------------------------------------------------------</span>

<span class="go">Position</span>
<span class="go">  Source name (astropy Resolver)    source_name_resolver                SkyCoord.from_name</span>
<span class="go">  Source name (ALMA)                source_name_alma                    target_name</span>
<span class="go">  RA Dec (Sexagesimal)              ra_dec                              s_ra, s_dec</span>
<span class="go">  Galactic (Degrees)                galactic                            gal_longitude, gal_latitude</span>
<span class="go">  Angular resolution (arcsec)       spatial_resolution                  spatial_resolution</span>
<span class="go">  Largest angular scale (arcsec)    spatial_scale_max                   spatial_scale_max</span>
<span class="go">  Field of view (arcsec)            fov                                 s_fov</span>

<span class="go">Energy</span>
<span class="go">  Frequency (GHz)                   frequency                           frequency</span>
<span class="go">  Bandwidth (Hz)                    bandwidth                           bandwidth</span>
<span class="go">  Spectral resolution (KHz)         spectral_resolution                 em_resolution</span>
<span class="go">  Band                              band_list                           band_list</span>

<span class="go">Time</span>
<span class="go">  Observation date                  start_date                          t_min</span>
<span class="go">  Integration time (s)              integration_time                    t_exptime</span>

<span class="go">Polarization</span>
<span class="go">  Polarisation type (Single, Dual, Full) polarisation_type                   pol_states</span>

<span class="go">Observation</span>
<span class="go">  Line sensitivity (10 km/s) (mJy/beam) line_sensitivity                    sensitivity_10kms</span>
<span class="go">  Continuum sensitivity (mJy/beam)  continuum_sensitivity               cont_sensitivity_bandwidth</span>
<span class="go">  Water vapour (mm)                 water_vapour                        pvw</span>

<span class="go">Project</span>
<span class="go">  Project code                      project_code                        proposal_id</span>
<span class="go">  Project title                     project_title                       obs_title</span>
<span class="go">  PI name                           pi_name                             obs_creator_name</span>
<span class="go">  Proposal authors                  proposal_authors                    proposal_authors</span>
<span class="go">  Project abstract                  project_abstract                    proposal_abstract</span>
<span class="go">  Publication count                 publication_count                   NA</span>
<span class="go">  Science keyword                   science_keyword                     science_keyword</span>

<span class="go">Publication</span>
<span class="go">  Bibcode                           bibcode                             bib_reference</span>
<span class="go">  Title                             pub_title                           pub_title</span>
<span class="go">  First author                      first_author                        first_author</span>
<span class="go">  Authors                           authors                             authors</span>
<span class="go">  Abstract                          pub_abstract                        pub_abstract</span>
<span class="go">  Year                              publication_year                    pub_year</span>

<span class="go">Options</span>
<span class="go">  Public data only                  public_data                         data_rights</span>
<span class="go">  Science observations only         science_observations                calib_level</span>

<span class="go">Examples of queries:</span>
<span class="go">Alma.query(&#39;proposal_id&#39;:&#39;2011.0.00131.S&#39;}</span>
<span class="go">Alma.query({&#39;band_list&#39;: [&#39;5&#39;, &#39;7&#39;]}</span>
<span class="go">Alma.query({&#39;source_name_alma&#39;: &#39;GRB021004&#39;})</span>
<span class="go">Alma.query(payload=dict(project_code=&#39;2017.1.01355.L&#39;, source_name_alma=&#39;G008.67&#39;))</span>
</pre></div>
</div>
</section>
<section id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Link to this heading">¶</a></h2>
<p>Users can log in to acquire proprietary data products.  Login is performed
via the ALMA OIDC (OpenID Connect) service, Keycloak.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma</span> <span class="kn">import</span> <span class="n">Alma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># First example: TEST is not a valid username, it will fail</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s2">&quot;TEST&quot;</span><span class="p">)</span>
<span class="go">TEST, enter your ALMA password:</span>

<span class="go">Authenticating TEST on asa.alma.cl ...</span>
<span class="go">Authentication failed!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Second example: pretend ICONDOR is a valid username</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s2">&quot;ICONDOR&quot;</span><span class="p">,</span> <span class="n">store_password</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">ICONDOR, enter your ALMA password:</span>

<span class="go">Authenticating ICONDOR on asa.alma.cl...</span>
<span class="go">Successfully logged in to asa.alma.cl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># After the first login, your password has been stored</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="s2">&quot;ICONDOR&quot;</span><span class="p">)</span>
<span class="go">Authenticating ICONDOR on asa.alma.cl...</span>
<span class="go">Successfully logged in to asa.alma.cl</span>
</pre></div>
</div>
<p>Your password will be stored by the <a class="reference external" href="https://pypi.org/project/keyring">keyring</a> module.
You can choose not to store your password by passing the argument
<code class="docutils literal notranslate"><span class="pre">store_password=False</span></code> to <code class="docutils literal notranslate"><span class="pre">Alma.login</span></code>.  You can delete your password later
with the command <code class="docutils literal notranslate"><span class="pre">keyring.delete_password('astroquery:asa.alma.cl',</span>
<span class="pre">'username')</span></code>.</p>
</section>
<section id="querying-targets-and-regions">
<h2>Querying Targets and Regions<a class="headerlink" href="#querying-targets-and-regions" title="Link to this heading">¶</a></h2>
<p>You can query by object name or by circular region:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma</span> <span class="kn">import</span> <span class="n">Alma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m83_data</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">query_object</span><span class="p">(</span><span class="s1">&#39;M83&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m83_data</span><span class="o">.</span><span class="n">colnames</span>  
<span class="go">[&#39;obs_publisher_did&#39;, &#39;obs_collection&#39;, &#39;facility_name&#39;, &#39;instrument_name&#39;,</span>
<span class="go">&#39;obs_id&#39;, &#39;dataproduct_type&#39;, &#39;calib_level&#39;, &#39;target_name&#39;, &#39;s_ra&#39;,</span>
<span class="go">&#39;s_dec&#39;, &#39;s_fov&#39;, &#39;s_region&#39;, &#39;s_resolution&#39;, &#39;t_min&#39;, &#39;t_max&#39;,</span>
<span class="go">&#39;t_exptime&#39;, &#39;t_resolution&#39;, &#39;em_min&#39;, &#39;em_max&#39;, &#39;em_res_power&#39;,</span>
<span class="go">&#39;pol_states&#39;, &#39;o_ucd&#39;, &#39;access_url&#39;, &#39;access_format&#39;, &#39;proposal_id&#39;,</span>
<span class="go">&#39;data_rights&#39;, &#39;gal_longitude&#39;, &#39;gal_latitude&#39;, &#39;band_list&#39;,</span>
<span class="go">&#39;em_resolution&#39;, &#39;bandwidth&#39;, &#39;antenna_arrays&#39;, &#39;is_mosaic&#39;,</span>
<span class="go">&#39;obs_release_date&#39;, &#39;spatial_resolution&#39;, &#39;frequency_support&#39;, &#39;frequency&#39;,</span>
<span class="go">&#39;velocity_resolution&#39;, &#39;obs_creator_name&#39;, &#39;pub_title&#39;, &#39;first_author&#39;,</span>
<span class="go">&#39;authors&#39;, &#39;pub_abstract&#39;, &#39;publication_year&#39;, &#39;proposal_abstract&#39;,</span>
<span class="go">&#39;schedblock_name&#39;, &#39;proposal_authors&#39;, &#39;sensitivity_10kms&#39;,</span>
<span class="go">&#39;cont_sensitivity_bandwidth&#39;, &#39;pwv&#39;, &#39;group_ous_uid&#39;, &#39;member_ous_uid&#39;,</span>
<span class="go">&#39;asdm_uid&#39;, &#39;obs_title&#39;, &#39;type&#39;, &#39;scan_intent&#39;, &#39;science_observation&#39;,</span>
<span class="go">&#39;spatial_scale_max&#39;, &#39;qa2_passed&#39;, &#39;bib_reference&#39;, &#39;science_keyword&#39;,</span>
<span class="go">&#39;scientific_category&#39;, &#39;lastModified&#39;]</span>
</pre></div>
</div>
<p>Region queries are just like any other in astroquery:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">galactic_center</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span>
<span class="gp">... </span>                                       <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;galactic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gc_data</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span><span class="n">galactic_center</span><span class="p">,</span> <span class="mi">1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gc_data</span><span class="p">)</span>  
<span class="go">     obs_publisher_did      obs_collection facility_name ...     scientific_category           lastModified</span>
<span class="go">                                                         ...</span>
<span class="go">--------------------------- -------------- ------------- ... --------------------------- -----------------------</span>
<span class="go">ADS/JAO.ALMA#2012.1.00133.S           ALMA           JAO ...      ISM and star formation 2021-09-30T16:34:41.133</span>
</pre></div>
</div>
</section>
<section id="querying-by-other-parameters">
<h2>Querying by other parameters<a class="headerlink" href="#querying-by-other-parameters" title="Link to this heading">¶</a></h2>
<p>As of version 0.3.4, you can also query other fields by keyword. For example,
if you want to find all projects in a region with a particular PI, you could do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span><span class="s1">&#39;W51&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">25</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">arcmin</span><span class="p">,</span> <span class="n">pi_name</span><span class="o">=</span><span class="s1">&#39;*Ginsburg*&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or if you wanted all projects by a given PI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">payload</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">pi_name</span><span class="o">=</span><span class="s1">&#39;Ginsburg, Adam&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">query_sia</span></code> method offers another way to query ALMA using the IVOA SIA
subset of keywords returning results in ‘ObsCore’ format.  For example,
to query for all images that have <code class="docutils literal notranslate"><span class="pre">'XX'</span></code> polarization (note that this query is too large
to run, it is just shown as an example):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query_sia</span><span class="p">(</span><span class="n">pol</span><span class="o">=</span><span class="s1">&#39;XX&#39;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Finally, the <code class="docutils literal notranslate"><span class="pre">query_tap</span></code> method is the most general way of querying the ALMA
metadata. This method is used to send queries to the service using the
<code class="docutils literal notranslate"><span class="pre">ObsCore</span></code> columns as constraints. The returned result is also in <code class="docutils literal notranslate"><span class="pre">ObsCore</span></code>
format.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="s2">&quot;select * from ivoa.obscore where target_name like &#39;%M83%&#39;&quot;</span><span class="p">)</span>  
<span class="go">&lt;Table length=364&gt;</span>
<span class="go">     obs_publisher_did      obs_collection facility_name ...       scientific_category         lastModified</span>
<span class="go">                                                         ...</span>
<span class="go">           str33                 str4           str3     ...              str200                  object</span>
<span class="go">--------------------------- -------------- ------------- ... ---------------------- -----------------------</span>
<span class="go">ADS/JAO.ALMA#2016.1.00164.S           ALMA           JAO ...        Active galaxies 2021-09-30T16:34:41.133</span>
</pre></div>
</div>
<p>One can also query by keyword, spatial resolution, etc:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="s2">&quot;select * from ivoa.obscore WHERE spatial_resolution&lt;=0.1 AND science_keyword &quot;</span>
<span class="gp">... </span>               <span class="s2">&quot;in (&#39;Disks around high-mass stars&#39;, &#39;Asymptotic Giant Branch (AGB) stars&#39;) &quot;</span>
<span class="gp">... </span>               <span class="s2">&quot;AND science_observation=&#39;T&#39;&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">query_tap</span></code> also supports uploading temporary tables that can be used to join to in queries.
These temporary tables can be defined as ‘’astropy.table.Table’’ instances or references to file names or
file like handles (<a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">StringIO</span></code></a> instances for example) of table definitions in IVOA VOTable format.
Below is a very simple example of using <a class="reference external" href="https://docs.astropy.org/en/stable/api/astropy.table.Table.html#astropy.table.Table" title="(in Astropy v7.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Table</span></code></a> temporary table with the <code class="docutils literal notranslate"><span class="pre">proj_codes</span></code> name.
Note that the table name must always be prefixed with the <code class="docutils literal notranslate"><span class="pre">TAP_UPLOAD</span></code> schema when referenced in queries.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmp_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">([[</span><span class="s1">&#39;2013.1.01365.S&#39;</span><span class="p">,</span> <span class="s1">&#39;2013.A.00014.S&#39;</span><span class="p">]],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;prop_id&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;S&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="s1">&#39;select distinct target_name from ivoa.ObsCore oc join TAP_UPLOAD.proj_codes pc on oc.proposal_id=pc.prop_id order by target_name&#39;</span><span class="p">,</span>
<span class="gp">... </span>               <span class="n">uploads</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;proj_codes&#39;</span><span class="p">:</span> <span class="n">tmp_table</span><span class="p">})</span>
<span class="go">&lt;DALResultsTable length=13&gt;</span>
<span class="go">target_name</span>
<span class="go">   str256</span>
<span class="go">------------</span>
<span class="go">       Ceres</span>
<span class="go">  J0042-4030</span>
<span class="go">  J0334-4008</span>
<span class="go">   J1733-130</span>
<span class="go">  J1751+0939</span>
<span class="go">   J1751+096</span>
<span class="go">  J1851+0035</span>
<span class="go">  J1924-2914</span>
<span class="go">     Neptune</span>
<span class="go">SGP-UR-54092</span>
<span class="go">       Titan</span>
<span class="go">      Uranus</span>
<span class="go">     W43-MM1</span>
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">help_tap</span></code> method to learn about the ALMA <code class="docutils literal notranslate"><span class="pre">ObsCore</span></code> keywords and
their types.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Alma</span><span class="o">.</span><span class="n">help_tap</span><span class="p">()</span>  
<span class="go">Table to query is &quot;voa.ObsCore&quot;.</span>
<span class="go">For example: &quot;select top 1 * from ivoa.ObsCore&quot;</span>
<span class="go">The scheme of the table is as follows.</span>

<span class="go">  Name                 Type            Unit       Description</span>
<span class="go">------------------------------------------------------------------------------------------</span>
<span class="go">  access_estsize       int            kbyte       Estimated size of datasets in kilobytes</span>
<span class="go">  access_format        char(9)                    Content format of the data</span>
<span class="go">  access_url           char(72*)                  URL to download the data</span>
<span class="go">  antenna_arrays       char(660*)                 Blank-separated list of Pad:Antenna pairs, i.e., A109:DV09 J504:DV02 J505:DV05 for antennas DV09, DV02 and DV05 sitting on pads A109, J504, and J505, respectively.</span>
<span class="go">  asdm_uid             char(32*)                  UID of the ASDM containing this Field.</span>
<span class="go">  authors              char(4000*)                Full list of first author and all co-authors</span>
<span class="go">  band_list            char(30*)                  Space delimited list of bands</span>
<span class="go">  bandwidth            double          GHz        Total Bandwidth</span>
<span class="go">  bib_reference        char(4000*)                 Bibliography code</span>
<span class="go">  calib_level          int                        calibration level (2 or 3). 2 if product_type = MOUS, 3 if product_type = GOUS</span>
<span class="go">  cont_sensitivity_bandwidth double          mJy/beam   Estimated noise in the aggregated continuum bandwidth. Note this is an indication only, it does not include the effects of flagging or dynamic range limitations.</span>
<span class="go">  data_rights          char(11)                   Access to data.</span>
<span class="go">  dataproduct_type     char(5*)                   type of product</span>
<span class="go">  em_max               double          m          stop spectral coordinate value</span>
<span class="go">  em_min               double          m          start spectral coordinate value</span>
<span class="go">  em_res_power         double                     typical spectral resolution</span>
<span class="go">  em_resolution        double          m          Estimated frequency resolution from all the spectral windows, using median values of channel widths.</span>
<span class="go">  em_xel                       int                        Number of elements along the spectral axis</span>
<span class="go">  facility_name        char(3)                    telescope name</span>
<span class="go">  first_author         char(256*)                 The first author as provided by &lt;a href=&quot;http://telbib.eso.org&quot;&gt;telbib.eso.org&lt;/a&gt;.</span>
<span class="go">  frequency            double          GHz        Observed (tuned) reference frequency on the sky.</span>
<span class="go">  frequency_support    char(4000*)     GHz        All frequency ranges used by the field</span>
<span class="go">  gal_latitude         double          deg        Galactic latitude of the observation for RA/Dec. Estimated using PyEphem and RA/Dec.</span>
<span class="go">  gal_longitude        double          deg        Galactic longitude of the observation for RA/Dec. Estimated using PyEphem and RA/Dec.</span>
<span class="go">  group_ous_uid        char(64*)                  Group OUS ID</span>
<span class="go">  instrument_name      char(4)                    instrument name</span>
<span class="go">  is_mosaic            char(1)                    Flag to indicate if this ASDM represents a mosaic or not.</span>
<span class="go">  lastModified         char(*)                    Time stamp of last modification of the metadata</span>
<span class="go">  member_ous_uid       char(64*)                  Member OUS ID</span>
<span class="go">  o_ucd                char(35)                   UCD describing the observable axis (pixel values)</span>
<span class="go">  obs_collection       char(4)                    short name for the data collection</span>
<span class="go">  obs_creator_name     char(256*)                 case-insensitive partial match over the full PI name. Wildcards can be used</span>
<span class="go">  obs_id               char(64*)                  internal dataset identifier</span>
<span class="go">  obs_publisher_did    char(33*)                  publisher dataset identifier</span>
<span class="go">  obs_release_date     char(*)                    timestamp of date the data becomes publicly available</span>
<span class="go">  obs_title            char(256*)                 Case-insensitive search over the project title</span>
<span class="go">  pol_states           char(64*)                  polarization states present in the data</span>
<span class="go">  pol_xel              int                        Number of polarization samples</span>
<span class="go">  proposal_abstract    char(4000*)                Text search on the proposal abstract. Only abstracts will be returned which contain the given text. The search is case-insensitive.</span>
<span class="go">  proposal_authors     char(2000*)                Full name of CoIs .</span>
<span class="go">  proposal_id          char(64*)                  Identifier of proposal to which NO observation belongs.</span>
<span class="go">  pub_abstract         char(4000*)                Case insensitive text search through the abstract of the publication.</span>
<span class="go">  pub_title            char(256*)                 Case insensitive search through the title of the publication.</span>
<span class="go">  publication_year     int                        The year the publication did appear in the printed version of the refereed journal.</span>
<span class="go">  pwv                  float           mm         Estimated precipitable water vapour from the XML_CALWVR_ENTITIES table.</span>
<span class="go">  qa2_passed           char(1)                    Quality Assessment 2 status: does the Member / Group OUS fulfil the PI&#39;s requirements?</span>
<span class="go">  s_dec                double          deg        DEC of central coordinates</span>
<span class="go">  s_fov                double          deg        size of the region covered (~diameter of minimum bounding circle)</span>
<span class="go">  s_ra                 double          deg        RA of central coordinates</span>
<span class="go">  s_region             char(*)         deg        region bounded by observation</span>
<span class="go">  s_resolution         double          deg        typical spatial resolution</span>
<span class="go">  s_xel1               int                        Number of elements along the first spatial axis</span>
<span class="go">  s_xel2               int                        Number of elements along the second spatial axis</span>
<span class="go">  scan_intent          char(256*)                 Scan intent list for the observed field.</span>
<span class="go">  schedblock_name      char(128*)                 Name of the Scheduling Block used as a template for executing the ASDM containing this Field.</span>
<span class="go">  science_keyword      char(200*)                 None</span>
<span class="go">  science_observation  char(1)                    Flag to indicate whether this is a science observation.</span>
<span class="go">  scientific_category  char(200*)                 None</span>
<span class="go">  sensitivity_10kms    double          mJy/beam   Estimated noise in an nominal 10km/s bandwidth. Note this is an indication only, it does not include the effects of flagging or Hanning smoothing, and a 10km/s bandwidth may not be achievable with the data as taken.</span>
<span class="go">  spatial_resolution   double          arcsec     Average of the maximum and minimum spatial resolution values of all spectral windows</span>
<span class="go">  spatial_scale_max    double          arcsec     Due to the fact that radio antennas can not be placed infinitely close, measurements do have a smallest separation which translates into a maximal angular distance beyond which features can not be resolved reliably any more. Adding observations with the ALMA Total Power array can add those missing largest scales.</span>
<span class="go">  t_exptime            double          s          exposure time of observation</span>
<span class="go">  t_max                double          d          end time of observation (MJD)</span>
<span class="go">  t_min                double          d          start time of observation (MJD)</span>
<span class="go">  t_resolution         double          s          typical temporal resolution</span>
<span class="go">  t_xel                int                        Number of elements along the time axis</span>
<span class="go">  target_name          char(256*)                 name of intended target</span>
<span class="go">  type                 char(16*)                  Type flags.</span>
<span class="go">  velocity_resolution  double          m/s        Estimated velocity resolution from all the spectral windows, from frequency resolution.</span>
</pre></div>
</div>
</section>
<section id="query-results">
<h2>Query Results<a class="headerlink" href="#query-results" title="Link to this heading">¶</a></h2>
<p>Results of queries are returned in tabular format. For convenience,
the <a class="reference internal" href="../api/astroquery.alma.get_enhanced_table.html#astroquery.alma.get_enhanced_table" title="astroquery.alma.get_enhanced_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_enhanced_table</span></code></a> function can be used to have the initial result
in a more useful format, i.e., turn values into quantities, footprint into
shape, etc. (Note: this require the <a class="reference external" href="https://astropy-regions.readthedocs.io/en/stable/api.html#module-regions" title="(in regions v0.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regions</span></code></a> Python package to be installed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma</span> <span class="kn">import</span> <span class="n">Alma</span><span class="p">,</span> <span class="n">get_enhanced_table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">query_tap</span><span class="p">(</span><span class="s2">&quot;select top 1 * from ivoa.ObsCore where obs_publisher_did=&#39;ADS/JAO.ALMA#2011.0.00087.S&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enhanced_res</span> <span class="o">=</span> <span class="n">get_enhanced_table</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enhanced_res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;s_ra&#39;</span><span class="p">]</span>
<span class="go">    &lt;MaskedQuantity 86.82119735 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enhanced_res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;s_region&#39;</span><span class="p">]</span>
<span class="go">    &lt;PolygonSkyRegion(vertices=&lt;SkyCoord (ICRS): (ra, dec) in deg</span>
<span class="go">    [(86.823884, -51.067761), (86.820804, -51.069956),</span>
<span class="go">     (86.818262, -51.069702), (86.81656 , -51.068489),</span>
<span class="go">     (86.816655, -51.066594), (86.820904, -51.063002),</span>
<span class="go">     (86.823701, -51.063002), (86.825834, -51.064343),</span>
<span class="go">     (86.825915, -51.065959)]&gt;)&gt;</span>
</pre></div>
</div>
<p>To further draw the footprint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">wcs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a WCS; for plotting, all that matters is that it is centered on our target region</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ww</span> <span class="o">=</span> <span class="n">wcs</span><span class="o">.</span><span class="n">WCS</span><span class="p">(</span><span class="n">naxis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ww</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">crpix</span> <span class="o">=</span> <span class="p">[</span><span class="mf">250.0</span><span class="p">,</span> <span class="mf">250.0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ww</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">cdelt</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">7.500000005754e-05</span><span class="p">,</span> <span class="mf">7.500000005754e-05</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ww</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">ctype</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RA---SIN&#39;</span><span class="p">,</span> <span class="s1">&#39;DEC--SIN&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ww</span><span class="o">.</span><span class="n">wcs</span><span class="o">.</span><span class="n">crval</span> <span class="o">=</span> <span class="p">[</span><span class="n">enhanced_res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;s_ra&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">enhanced_res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;s_dec&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pix_region</span> <span class="o">=</span> <span class="n">enhanced_res</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;s_region&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pixel</span><span class="p">(</span><span class="n">ww</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artist</span> <span class="o">=</span> <span class="n">pix_region</span><span class="o">.</span><span class="n">as_artist</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ww</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axes</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axes</span><span class="o">.</span><span class="n">add_artist</span><span class="p">(</span><span class="n">artist</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">axes</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">pix_region</span><span class="o">.</span><span class="n">bounding_box</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pix_region</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/footprint.png"><img alt="observation footprint" class="align-center" src="../_images/footprint.png" style="width: 802.5px; height: 688.5px;" />
</a>
<p>The above footprint could be transformed into a pixel region and have the mask
extracted or combined with other regions. Refer to the Astropy affiliated
‘’regions’’ package for more details.</p>
</section>
<section id="downloading-data">
<h2>Downloading Data<a class="headerlink" href="#downloading-data" title="Link to this heading">¶</a></h2>
<p>You can download ALMA data with astroquery, but be forewarned, many data sets
are &gt;100 GB!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma</span> <span class="kn">import</span> <span class="n">Alma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m83_data</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">query_object</span><span class="p">(</span><span class="s1">&#39;M83&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">m83_data</span><span class="p">[</span><span class="s1">&#39;member_ous_uid&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">uids</span><span class="p">)</span>
<span class="go">     member_ous_uid</span>
<span class="go">-----------------------</span>
<span class="go">    uid://A001/X11f/X30</span>
<span class="go">    uid://A001/X122/Xf3</span>
<span class="go">    ...</span>
</pre></div>
</div>
<p>The new <code class="docutils literal notranslate"><span class="pre">`get_data_info`</span></code> method can be used to get information about the
data such as the file names, their urls, sizes etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">link_list</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">get_data_info</span><span class="p">(</span><span class="n">uids</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>By default, ALMA data is delivered as tarball files. However, the content of
some of these files can be listed and accessed individually. To get information
on the individual files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">link_list</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">get_data_info</span><span class="p">(</span><span class="n">uids</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="n">expand_tarfiles</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>You can then go on to download those files.  The download will be cached so
that repeat queries of the same file will not re-download the data.  The
default cache directory is <code class="docutils literal notranslate"><span class="pre">~/.astropy/cache/astroquery/Alma/</span></code>, but this can
be changed by changing the <code class="docutils literal notranslate"><span class="pre">cache_location</span></code> variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAlma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAlma</span><span class="o">.</span><span class="n">cache_location</span> <span class="o">=</span> <span class="s1">&#39;/big/external/drive/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myAlma</span><span class="o">.</span><span class="n">download_files</span><span class="p">(</span><span class="n">link_list</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also do the downloading all in one step:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAlma</span><span class="o">.</span><span class="n">retrieve_data_from_uid</span><span class="p">(</span><span class="n">uids</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  
</pre></div>
</div>
<p>If you have huge files, sometimes the transfer fails, so you will need to
restart the download.  By default, the module will resume downloading where the
failure occurred.  You can check whether the downloads all succeeded before
triggering a new download by using the <code class="docutils literal notranslate"><span class="pre">verify_only</span></code> keyword, which will not
download but will return useful information about the state of your downloads:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myAlma</span><span class="o">.</span><span class="n">download_files</span><span class="p">(</span><span class="n">link_list</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verify_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
</pre></div>
</div>
</section>
<section id="downloading-fits-data">
<h2>Downloading FITS data<a class="headerlink" href="#downloading-fits-data" title="Link to this heading">¶</a></h2>
<p>If you want just the QA2-produced FITS files, you can directly access the FITS
files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astroquery.alma.core</span> <span class="kn">import</span> <span class="n">Alma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">coordinates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s255ir</span> <span class="o">=</span> <span class="n">coordinates</span><span class="o">.</span><span class="n">SkyCoord</span><span class="p">(</span><span class="mf">93.26708333</span><span class="p">,</span> <span class="mf">17.97888889</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;fk5&#39;</span><span class="p">,</span>
<span class="gp">... </span>                              <span class="n">unit</span><span class="o">=</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span> <span class="o">=</span> <span class="n">Alma</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alma</span><span class="o">.</span><span class="n">archive_url</span> <span class="o">=</span> <span class="s1">&#39;https://almascience.eso.org&#39;</span>  <span class="c1"># optional to make doctest work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">query_region</span><span class="p">(</span><span class="n">s255ir</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.034</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uid_url_table</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">get_data_info</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;member_ous_uid&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">expand_tarfiles</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># downselect to just the FITSf files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fits_urls</span> <span class="o">=</span> <span class="p">[</span><span class="n">url</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">uid_url_table</span><span class="p">[</span><span class="s1">&#39;access_url&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;.fits&#39;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filelist</span> <span class="o">=</span> <span class="n">alma</span><span class="o">.</span><span class="n">download_files</span><span class="p">(</span><span class="n">fits_urls</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>  
</pre></div>
</div>
<p>You might want to look at the READMEs from a bunch of files so you know what
kind of S/N to expect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">readmes</span> <span class="o">=</span> <span class="p">[</span><span class="n">url</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">uid_url_table</span><span class="p">[</span><span class="s1">&#39;access_url&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;README&#39;</span> <span class="ow">in</span> <span class="n">url</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filelist</span> <span class="o">=</span> <span class="n">Alma</span><span class="o">.</span><span class="n">download_files</span><span class="p">(</span><span class="n">readmes</span><span class="p">)</span>  
</pre></div>
</div>
</section>
<section id="notebooks">
<h2>Notebooks<a class="headerlink" href="#notebooks" title="Link to this heading">¶</a></h2>
<p>A set of ALMA-maintained Jupyter Notebooks that showcase further examples of how to programmatically access
the archive can be found <a class="reference external" href="https://almascience.nrao.edu/alma-data/archive/archive-notebooks">here</a>.</p>
</section>
<section id="reference-api">
<h2>Reference/API<a class="headerlink" href="#reference-api" title="Link to this heading">¶</a></h2>
<section id="module-astroquery.alma">
<span id="astroquery-alma-package"></span><h3>astroquery.alma Package<a class="headerlink" href="#module-astroquery.alma" title="Link to this heading">¶</a></h3>
<p>ALMA Archive service.</p>
<section id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h4>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astroquery.alma.get_enhanced_table.html#astroquery.alma.get_enhanced_table" title="astroquery.alma.get_enhanced_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_enhanced_table</span></code></a>(result)</p></td>
<td><p>Returns an enhanced table with quantities instead of values and regions for footprints.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="classes">
<h4>Classes<a class="headerlink" href="#classes" title="Link to this heading">¶</a></h4>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astroquery.alma.AlmaClass.html#astroquery.alma.AlmaClass" title="astroquery.alma.AlmaClass"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AlmaClass</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astroquery.alma.Conf.html#astroquery.alma.Conf" title="astroquery.alma.Conf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Conf</span></code></a>()</p></td>
<td><p>Configuration parameters for <a class="reference internal" href="#module-astroquery.alma" title="astroquery.alma"><code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.alma</span></code></a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="module-astroquery.alma.utils">
<span id="astroquery-alma-utils-module"></span><h3>astroquery.alma.utils Module<a class="headerlink" href="#module-astroquery.alma.utils" title="Link to this heading">¶</a></h3>
<p>Utilities for making finder charts and overlay images for ALMA proposing</p>
<section id="id1">
<h4>Functions<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astroquery.alma.utils.parse_frequency_support.html#astroquery.alma.utils.parse_frequency_support" title="astroquery.alma.utils.parse_frequency_support"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_frequency_support</span></code></a>(frequency_support_str)</p></td>
<td><p>ALMA &quot;Frequency Support&quot; strings have the form:</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api/astroquery.alma.utils.footprint_to_reg.html#astroquery.alma.utils.footprint_to_reg" title="astroquery.alma.utils.footprint_to_reg"><code class="xref py py-obj docutils literal notranslate"><span class="pre">footprint_to_reg</span></code></a>(footprint)</p></td>
<td><p>ALMA footprints have the form: 'Polygon ICRS 266.519781 -28.724666 266.524678 -28.731930 266.536683 -28.737784 266.543860 -28.737586 266.549277 -28.733370 266.558133 -28.729545 266.560136 -28.724666 266.558845 -28.719605 266.560133 -28.694332 266.555234 -28.687069 266.543232 -28.681216 266.536058 -28.681414 266.530644 -28.685630 266.521788 -28.689453 266.519784 -28.694332 266.521332 -28.699778' Some of them have <em>additional</em> polygons</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api/astroquery.alma.utils.approximate_primary_beam_sizes.html#astroquery.alma.utils.approximate_primary_beam_sizes" title="astroquery.alma.utils.approximate_primary_beam_sizes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">approximate_primary_beam_sizes</span></code></a>(...[, ...])</p></td>
<td><p>Using parse_frequency_support, determine the mean primary beam size in each observed band</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">ALMA Queries (<code class="xref py py-obj docutils literal notranslate"><span class="pre">astroquery.alma</span></code>)</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#querying-targets-and-regions">Querying Targets and Regions</a></li>
<li><a class="reference internal" href="#querying-by-other-parameters">Querying by other parameters</a></li>
<li><a class="reference internal" href="#query-results">Query Results</a></li>
<li><a class="reference internal" href="#downloading-data">Downloading Data</a></li>
<li><a class="reference internal" href="#downloading-fits-data">Downloading FITS data</a></li>
<li><a class="reference internal" href="#notebooks">Notebooks</a></li>
<li><a class="reference internal" href="#reference-api">Reference/API</a><ul>
<li><a class="reference internal" href="#module-astroquery.alma">astroquery.alma Package</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-astroquery.alma.utils">astroquery.alma.utils Module</a><ul>
<li><a class="reference internal" href="#id1">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="../_sources/alma/alma.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2025, The Astroquery Developers.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 7.4.7. &nbsp;
    Last built 02 Apr 2025. <br/>
  </p>
</footer>
  </body>
</html>